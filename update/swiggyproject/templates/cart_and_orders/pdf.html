{% load static %}
{% load staticfiles %}
<html>
    <head>
        <title>pdf</title>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mukta:300,400,700"> 
    <link rel="stylesheet" href="{% static 'fonts/icomoon/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery-ui.css' %}">
   
    
    </head>
    <body>
        <div class='container'>
            <div class='row'>
                <div class='col-md-12'>
                    <h1 id='optionh1' style="color:black;margin-left: 50px">Weekly Wise Order</h1>
                    <div id='container' style="width: 900px;height:500px">
                            <canvas id="myChart" >
                                <img id="url" />
                            </canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class='container'>
            <div class='row'>
                <div class='col-md-12'>
                    <table  id='datatable' class="table table-bordered" style=" text-align: left">

                        <tr >
                        <td colspan="3" style="color: black;text-align:center"><h4>Total Orders</h4></td>
                        </tr>
                        <tr>
                            <td>
                                <h5 style="color: black;text-align:center" >Order No</h5>
                            </td>
                            <td>
                                    <h5 style="color: black;text-align:center">Order Date</h5>
                                </td>
                            <td>
                                <h5 style="color: black;text-align:center">Total Price</h5>
                            </td>
                        </tr>
                        {% for order in orders %}
                        <tr>
                            <td>
                                <h5 style="color: black;text-align:center" >##00{{order.id}}</h5>
                            </td>
                            <td>
                                    <h5 style="color: black;text-align:center">{{order.orderdate}}</h5>
                                </td>
                            <td>
                                <h5 style="color: black;text-align:center">{{order.totalpricetax}}</h5>
                            </td>
                        </tr>
                        {% endfor %}
                        <tr >
                            <td colspan="3" style="color: black;text-align:center"><h4>Total Earned(Rs): {{total}}</h4></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
       
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
        <script src="{% static 'js/aos.js' %}"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
      
       
        <script type="text/javascript">
            $(document).ready(function() { 
            

            var endpoint='{% url "graphpdf"  %}'
            console.log(endpoint)

			
            $.ajax({

            	method:"GET",
            	url:endpoint,
				data: {
                    'option':'Monthly'     // add the country id to the GET parameters
                 },
            	success:function(data){
            		labels=data.labels
					defaultdata=data.default
                    setChart()
				
            	},
            	error:function(error_data){
            		console.log("error")
            		console.log(error_data)
            	},
            });
        }); 
        function setChart(){
            

var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
	
	options: {
    tooltips: {enabled: false},
	hover: {mode: null},
	showTooltips: false,
  },
  
    type: 'line',
    data: {
        //labels: ['January','February', 'March', 'April', 'May', 'June','July','August','September','October','November','December'],
        labels:labels,
        datasets: [{
            label: '# Total orders',
            data:defaultdata,
            fill:false,
            borderWidth:1,
            showLine:true,
            borderColor:'rgba(0, 0, 0, 1)',
            lineTension:0,
            //data: [.5, 0.1,0.2,0.5, 0.2,0.3,.5, 0.1,0.2,0.8, 0.2,0.3],
           
            
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
					beginAtZero: true,
					fontSize: 15
				},
				
               
			}],
			xAxes:[{
				ticks: {
					
					fontSize: 15
				},
				
					  major: {
              fontStyle: 'bold',
			  fontColor: 'black'
			  
            }
			}]
        }
	}
});
}
        </script>
    </body>
</html>